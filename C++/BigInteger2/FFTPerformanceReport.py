#vim:fileencoding=utf-8

import re
import matplotlib.pyplot as plt

benchmark_output = [
"Scan v0\n\
        2^2: 0.079962 us 2^3: 0.150466 us 2^4: 0.311328 us 2^5: 0.682485 us 2^6: 1.510509 us 2^7: 3.264630 us 2^8: 7.021524 us 2^9: 15.282907 us 2^10: 32.847624 us 2^11: 72.555466 us 2^12: 153.917699 us 2^13: 324.635527 us 2^14: 729.209387 us 2^15: 1542.160453 us 2^16: 3264.870484 us 2^17: 7081.932187 us 2^18: 20505.781062 us 2^19: 49105.946875 us 2^20: 103019.066000 us 2^21: 214132.931500 us 2^22: 443331.132000 us 2^23: 954920.208000 us 2^24: 1957818.870000 us",
"Scan v1\n\
        2^2: 0.141517 us 2^3: 0.155555 us 2^4: 0.221316 us 2^5: 0.378981 us 2^6: 0.690240 us 2^7: 1.380858 us 2^8: 2.801186 us 2^9: 5.772764 us 2^10: 11.988426 us 2^11: 25.936346 us 2^12: 60.201833 us 2^13: 134.466947 us 2^14: 315.573324 us 2^15: 740.476961 us 2^16: 1700.749328 us 2^17: 3954.565656 us 2^18: 9000.179125 us 2^19: 29789.942625 us 2^20: 94984.762250 us 2^21: 231787.832000 us 2^22: 531270.086000 us 2^23: 1164032.236000 us 2^24: 2576454.446000 us",
"Scan v2\n\
        2^2: 0.006325 us 2^3: 0.014680 us 2^4: 0.034214 us 2^5: 0.075677 us 2^6: 0.163365 us 2^7: 0.515918 us 2^8: 1.573504 us 2^9: 2.913456 us 2^10: 6.965794 us 2^11: 16.919167 us 2^12: 38.455956 us 2^13: 88.046469 us 2^14: 209.365953 us 2^15: 440.720859 us 2^16: 965.442359 us 2^17: 2069.598781 us 2^18: 4976.491875 us 2^19: 14596.411125 us 2^20: 33968.353000 us 2^21: 71746.794500 us 2^22: 159853.750000 us 2^23: 379361.668000 us 2^24: 802336.167000 us",
"Scan v3\n\
        2^2: 0.006249 us 2^3: 0.012005 us 2^4: 0.027499 us 2^5: 0.061806 us 2^6: 0.141250 us 2^7: 0.330654 us 2^8: 0.719489 us 2^9: 2.080796 us 2^10: 4.617107 us 2^11: 11.999167 us 2^12: 27.076258 us 2^13: 60.027029 us 2^14: 144.517067 us 2^15: 310.926564 us 2^16: 673.072805 us 2^17: 1500.501492 us 2^18: 3652.441172 us 2^19: 11368.884281 us 2^20: 31918.040562 us 2^21: 65311.403625 us 2^22: 123355.433250 us 2^23: 280407.102500 us 2^24: 606104.036000 us",
"fftw3 estimate\n\
        2^2: 0.019903 us 2^3: 0.027295 us 2^4: 0.045500 us 2^5: 0.082414 us 2^6: 0.120721 us 2^7: 0.237984 us 2^8: 0.509205 us 2^9: 1.122954 us 2^10: 2.552185 us 2^11: 6.417468 us 2^12: 18.225350 us 2^13: 44.843113 us 2^14: 100.384066 us 2^15: 227.192547 us 2^16: 520.935828 us 2^17: 1185.360187 us 2^18: 3300.773187 us 2^19: 15199.068750 us 2^20: 34158.729500 us 2^21: 78615.560500 us 2^22: 199265.495000 us 2^23: 468799.826000 us 2^24: 1036200.585000 us",
"fftw3 measure\n\
        2^2: 0.009581 us 2^3: 0.014884 us 2^4: 0.030869 us 2^5: 0.057567 us 2^6: 0.101685 us 2^7: 0.211407 us 2^8: 0.441372 us 2^9: 1.006859 us 2^10: 2.435206 us 2^11: 5.973245 us 2^12: 15.925809 us 2^13: 36.915670 us 2^14: 93.872133 us 2^15: 193.272102 us 2^16: 419.216875 us 2^17: 951.608625 us 2^18: 3010.650813 us 2^19: 11666.031750 us 2^20: 21018.392250 us 2^21: 48927.700000 us 2^22: 99816.569000 us 2^23: 209901.861000 us 2^24: 461945.373000 us",
"acm tempate\n\
        2^2: 0.062168 us 2^3: 0.117608 us 2^4: 0.221078 us 2^5: 0.449748 us 2^6: 0.942373 us 2^7: 2.095933 us 2^8: 4.746445 us 2^9: 10.357794 us 2^10: 22.766678 us 2^11: 50.627132 us 2^12: 114.096557 us 2^13: 251.487518 us 2^14: 553.358938 us 2^15: 1228.570609 us 2^16: 2556.063266 us 2^17: 5306.420406 us 2^18: 11467.462562 us 2^19: 28298.686375 us 2^20: 65082.793750 us 2^21: 135470.812000 us 2^22: 281737.100000 us 2^23: 602935.668000 us 2^24: 1250711.256000 us",
"acm slow\n\
        2^2: 0.707088 us 2^3: 1.555619 us 2^4: 3.265494 us 2^5: 6.849430 us 2^6: 13.740353 us 2^7: 28.782172 us 2^8: 57.539458 us 2^9: 115.768977 us 2^10: 235.364391 us 2^11: 482.533722 us 2^12: 982.671263 us 2^13: 2087.221148 us 2^14: 4228.394109 us 2^15: 8471.245852 us 2^16: 17563.286562 us 2^17: 35952.604594 us 2^18: 75374.341500 us 2^19: 155452.267000 us 2^20: 322945.178750 us 2^21: 671607.813000 us 2^22: 1428045.276000 us 2^23: 2928475.751000 us 2^24: 5983035.637000 us",
"cpp cookbook\n\
        2^2: 0.109812 us 2^3: 0.189425 us 2^4: 0.317168 us 2^5: 0.556417 us 2^6: 1.107081 us 2^7: 2.236040 us 2^8: 4.751227 us 2^9: 10.334803 us 2^10: 23.186108 us 2^11: 52.842949 us 2^12: 157.894957 us 2^13: 389.784287 us 2^14: 965.509461 us 2^15: 2446.219719 us 2^16: 6446.361859 us 2^17: 15417.762312 us 2^18: 35176.060063 us 2^19: 80675.648500 us 2^20: 208856.786750 us 2^21: 483802.265500 us 2^22: 1029341.612000 us 2^23: 2272183.478000 us 2^24: 5715041.494000 us",
"free small fft\n\
        2^2: 0.141422 us 2^3: 0.261944 us 2^4: 0.520917 us 2^5: 1.016602 us 2^6: 2.057630 us 2^7: 4.335238 us 2^8: 9.079623 us 2^9: 18.971435 us 2^10: 39.685183 us 2^11: 83.042304 us 2^12: 179.641425 us 2^13: 382.547236 us 2^14: 810.309562 us 2^15: 1820.245422 us 2^16: 4264.939578 us 2^17: 9548.321031 us 2^18: 22092.093625 us 2^19: 57197.581875 us 2^20: 154132.439750 us 2^21: 367135.242000 us 2^22: 832086.106000 us 2^23: 1825193.081000 us 2^24: 4042984.221000 us",
"Eigen C++\n\
        2^2: 0.029143 us 2^3: 0.073629 us 2^4: 0.165334 us 2^5: 0.392684 us 2^6: 0.860470 us 2^7: 2.099621 us 2^8: 4.422548 us 2^9: 9.733137 us 2^10: 20.943952 us 2^11: 46.830123 us 2^12: 97.514787 us 2^13: 217.099166 us 2^14: 467.944555 us 2^15: 1018.298258 us 2^16: 2294.098047 us 2^17: 5509.359188 us 2^18: 17931.745188 us 2^19: 39482.750375 us 2^20: 101062.642000 us 2^21: 241127.799500 us 2^22: 565558.923000 us 2^23: 1274752.164000 us 2^24: 2869562.899000 us",
        ]

ys = []
names = []
for o in benchmark_output:
    name, numStr = o.split('\n')
    y=[float(s) for s in re.findall('\d+\.\d+', numStr)]
    names.append(name.strip())
    ys.append(y)

x = range(2,len(ys[0])+2)

for y in ys:
    y2 = [(1<<i)*i*5/v for i,v in zip(x, y)]
    plt.plot(x, y2)

plt.legend(names)
plt.show()
